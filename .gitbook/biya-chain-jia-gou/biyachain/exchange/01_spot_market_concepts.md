---
sidebar_position: 2
title: Spot Market Concepts
---

# 现货市场概念

## 定义

在代码为 **AAA/BBB** 的现货市场中，AAA 是基础资产，BBB 是报价资产。

例如，在 ETH/USDT 市场中

* ETH 是基础资产
* USDT 是报价资产

现货市场的**价格**是指购买一单位 ETH（基础资产）需要多少 USDT（报价资产）。\
对于所有现货市场，**费用始终以报价资产支付**，例如 USDT。

**借记与贷记**

* **借记金额**是指从账户中提取的资产金额。
* **贷记金额**是指存入账户的资产金额。

**退款**

在我们的系统中，退款是指增加账户**可用余额**的操作。资金的释放是由于\
账户上的负担被解除（例如取消限价单、将订单应付费用降低为做市商费用、使用更少的保证金为市价单提供资金等）。

### 限价买入订单

限价买入订单试图购买指定 `数量` 的 ETH（**基础资产**），以换取 `数量 * 价格` 数量的\
USDT（**报价资产**）**加上费用**，费用取决于限价单是作为做市商订单还是吃单订单执行。

### 限价卖出订单

限价卖出订单试图卖出指定 `数量` 的 ETH（**基础资产**），以换取 `数量 * 价格` 数量的\
USDT（**报价资产**）**减去费用**，费用取决于限价单是作为做市商订单还是吃单订单执行。

### 市价买入订单

市价买入订单试图以指定的最差价格购买指定 `数量` 的 ETH（**基础资产**），该价格等于或接近\
当前卖价，使用相应账户的报价资产余额（USDT）作为抵押**（含费用）**。

因此，每个市价买入订单都隐式关联一个最大可接受价格，因为以超过该价格的价格\
填充市价单将因资金不足而失败。

### 市价卖出订单

市价卖出订单试图以指定的最差价格卖出指定 `数量` 的 ETH（**基础资产**），该价格等于或接近\
当前买价，以换取市场中可用的任何数量的报价资产（USDT）。

因此，每个市价卖出订单都隐式关联一个零价格。

### 订单类型

* BUY (1)：标准买入订单，以当前市场价格或设定的限价购买资产。
* SELL (2)：标准卖出订单，以当前市场价格或设定的限价卖出资产。
* STOP\_BUY (3)：现货市场不支持此订单类型。
* STOP\_SELL (4)：现货市场不支持此订单类型。
* TAKE\_BUY (5)：现货市场不支持此订单类型。
* TAKE\_SELL (6)：现货市场不支持此订单类型。
* BUY\_PO (7)：仅挂单买入。此订单类型确保订单只会添加到订单簿，不会与现有订单匹配。它保证您将成为市场"做市商"而不是"吃单者"。
* SELL\_PO (8)：仅挂单卖出。类似于 BUY\_PO，这确保您的卖出订单只会向订单簿添加流动性，不会与现有订单匹配。
* BUY\_ATOMIC (9)：原子买入订单是一种立即执行的市价单，绕过频繁批量拍卖（FBA）。它适用于需要立即执行交易的智能合约。需要支付更高的费用，费用在全局交易所参数中定义。
* SELL\_ATOMIC (10)：原子卖出订单类似于 BUY\_ATOMIC，它以当前市场价格立即执行，绕过 FBA。

### 市场数据要求

除了订单簿数据，只要我们的链支持获取逐笔交易数据的**基础能力**，\
就可以应用聚合来获取大部分必要的高阶数据，包括

* OHLCV 数据
* 账户交易历史
* 市场统计

## 现货市场生命周期

### 基于治理的现货市场创建

市场首先通过即时启动功能创建，通过 `MsgInstantSpotMarketLaunch`，通过支付额外费用创建市场，\
无需治理批准。或者通过治理以正常方式创建，通过 `MsgSpotMarketLaunchProposal`。

### 基于上币费的现货市场创建

允许任何人通过燃烧预设的 BIYA `SpotMarketInstantListingFee` 来创建他们选择的活跃现货市场，\
无需治理批准。

我们仍应检查 denom 是否有效。

### 现货市场状态更新

现货市场可以存在于四种不同的状态：

1. 活跃
2. 暂停
3. 暂停交易
4. 已销毁

#### **活跃状态**

如果现货市场处于活跃状态，它可以接受订单和交易。

#### 暂停状态

如果现货市场处于暂停状态，它将不再接受订单和交易，也不允许任何用户\
对该市场采取任何操作（不允许取消订单）。

#### 暂停交易状态

如果现货市场处于暂停交易状态，它将不再接受订单和交易，只允许交易者取消\
他们的订单。

## 已销毁状态

当市场被销毁时，所有未完成的订单都会被取消。

#### 市场状态转换

有三种状态转换对应于以下状态变化

* 激活操作 - **暂停或暂停交易状态 → 活跃状态**
* 暂停操作 - **活跃或暂停交易状态 → 暂停状态**
* 暂停交易操作 - **活跃或暂停状态 → 暂停交易状态**
* 销毁操作 - **暂停或暂停交易状态 → 已销毁状态**

### 现货市场参数更新

现货市场存在以下参数

* SpotMarketInstantListingFee
* DefaultSpotMakerFeeRate
* DefaultSpotTakerFeeRate
